#シャンテン数を判定するアルゴリズムを作る

13個の牌をタンキ、トイツ、ターツ、メンツのいずれかに割り振る。
その割り振った状態のシャンテン数は自明である。
すべての割り振り方のシャンテン数のうちで、最小のものがその手のシャンテン数である。

(tanki, toitsu, taatsu, mentsu) とする。

13はどのように分割できるか。

3 x 4 + 2 x 0 + 1 x 1	1

3 x 3 + 2 x 2 + 1 x 0	3
3 x 3 + 2 x 1 + 1 x 2	2
3 x 3 + 2 x 0 + 1 x 4	1

3 x 2 + 2 x 3 + 1 x 1	4
3 x 2 + 2 x 2 + 1 x 3	3
3 x 2 + 2 x 1 + 1 x 5	2
3 x 2 + 2 x 0 + 1 x 7	1

3 x 1 + 2 x 5 + 1 x 0	6
3 x 1 + 2 x 4 + 1 x 2	5
3 x 1 + 2 x 3 + 1 x 4	4
3 x 1 + 2 x 2 + 1 x 6	3
3 x 1 + 2 x 1 + 1 x 8	2
3 x 1 + 2 x 0 + 1 x 10	1

3 x 0 + 2 x 6 + 1 x 1	7
3 x 0 + 2 x 5 + 1 x 3	6
3 x 0 + 2 x 4 + 1 x 5	5
3 x 0 + 2 x 3 + 1 x 7	4
3 x 0 + 2 x 2 + 1 x 9	3
3 x 0 + 2 x 1 + 1 x 11	2
3 x 0 + 2 x 0 + 1 x 13	1

合計、 1 + 6 + 10 + 21 + 28 = 66通り

66通りへの分解なんて余裕でできるはず。

どのような遷移がありえるか

( a, b, c, d ) => 
( a + 2 , b - 1, c , d )
( a + 2 , b, c - 1 , d )
( a + 1, b + 1, c, d - 1 )
( a + 1, b, c + 1, d - 1 )
( a - 1 , b - 1, c , d + 1 )
( a - 1 , b, c - 1 , d + 1 )
( a - 2, b + 1, c , d )
( a - 2, b, c + 1 , d )

ゴールは

(1,0,0,4)または(0,2,0,3)または(0,1,1,3)


少し違うな。

タンキの数が最小になり、かつ、メンツの数が最大になるように分割すればいいんじゃないかな。

本当か

タンキ待ちのつもりで4メンツ作る => 
	if 4 <= メンツ + トイツ + ターツ then (4-メンツ)
	else (4-メンツ-トイツ-ターツ)+(4-メンツ)
	つまり max(0, 4-(メンツ+トイツ+ターツ)) + (4-メンツ)
タンキ以外のつもりなら => 
	3メンツ+トイツ+(トイツorターツ)を作りたい
	トイツ>=1なら、head確定することを考えると、
	if (3-メンツ) <= (トイツ+ターツ-2) then (3-メンツ)
	else (3-メンツ)-(トイツ＋ターツ-2)+(3-メンツ)
	つまり
	if 5 <= メンツ+トイツ+ターツ then (3-メンツ)
	else (メンツ＋トイツ+ターツ)-5+(3-メンツ)
	つまり max(0, 5-(メンツ+トイツ+ターツ))+(3-メンツ)

	トイツ=0なら、まずheadを作らねばならないのでさらに+1必要
	その代わり、他の部分は4つでいい

	従って、max(0, 4-(メンツ+トイツ+ターツ))+(3-メンツ) + 1

	つまり、
	トイツ=0なら、
	max(0,4-(メンツ+トイツ+ターツ))+(4-メンツ)
	トイツ>=1なら、
	min(max(0,4-(メンツ+トイツ+ターツ))+(4-メンツ),max(0, 5-(メンツ+トイツ+ターツ))+(3-メンツ))

	5ブロック以上あるなら、3メンツ作る方が早い。
	4ブロック以下なら、3メンツorタンキどちらも同じ

	つまり実はminは常に右の項は左の項以下

	トイツ>=1なら、max(0, 5-(メンツ+トイツ+ターツ))+(3-メンツ) // 5ブロックを作り、その後3メンツ作る
	トイツ=0なら、max(0,4-(メンツ+ターツ))+(4-メンツ) // 4ブロック作り、その後4メンツ作る。

	どういう風に検索したらいい？
	メンツ1と(トイツorターツ1)+あまり1ならどちらがいい？ メンツ1が常にいい
	メンツ1と(トイツ+ターツ2)なら、どちらも同じ
	メンツ2と(トイツorターツ3)ならどちらがいい? メンツ2にした結果、トイツ=0であり、メンツ0、トイツ>=1場合、どちらもシャンテン数は同じ
	例112233 45 89 WRN
	一方で、タンキを増やす意味はない。
	0 (4,0,0), (3,2,0), (3,1,1)
	1 (3,0,2), (2,3,0), (2,2,1), (2,1,2)
	2 (2,0,3), (2,2,0), (2,1,1), (2,0,2), (1,5,0), (1,4,1), (1,3,2), (1,2,3), (1,1,4), (1,4,0), (1,3,1), (1,2,2), (1,1,3)
	3 (2,1,0), (2,0,1), (2,0,0), (1,0,5), (1,0,4), (1,3,0), (1,2,1), (1,1,2), (1,0,3), (0,6,0), (0,5,1), (0,4,2), (0,3,3), (0,2,4), (0,1,5) (0,5,0), (0,4,1), (0,3,2), (0,2,3), (0,1,4)
	4 (1,2,0), (1,1,1), (1,0,2), (0,0,6), (0,0,5), (0,4,0),(0,3,1),(0,2,2),(0,1,3),(0,0,4)
	5 (1,1,0), (1,0,1), (0,3,0),(0,2,1),(0,1,2),(0,0,3)
	6 (1,0,0), (0,2,0),(0,1,1),(0,0,2)
	7 (0,1,0), (0,0,1)
	8 (0,0,0)

	

メンツの数を数える
4 => 0
3 => トイツの数を数える 
	=> 2 => 0
	=> 1 => ターツの数を数える
		=> 1 => 0
		=> 0 => 1
	=> 0 => ターツの数を数える
		=> 2 => 1
		=> 1 => 2
		=> 0 => 3
2 => トイツの数を数える
	=> 3 => 1
	=> 2 => ターツの数を数える
		=> 1 => 1
		=> 0 => 2
	=> 1 => ターツの数を数える
		=> 2 => 1
		=> 1 => 2
		=> 0 => 3
	=> 0 ＝> ターツの数を数える
		=> 3 => 2
		=> 2 => 2
		=> 1 => 3
		=> 0 => 4
1 => トイツの数を数える
	=> 5 => 2
	=> 4 => ターツの数を数える
		=> 1 => 2
		=> 0 => 2
	=> 3 => ターツの数を数える
		=> 2 => 2
		=> 1 => 2
		=> 0 => 3
	=> 2 => ターツの数
		=> 3 => 2
		=> 2 => 2
		=> 1 => 3
		=> 0 => 4
	=> 1 => ターツの数
		=> 4 => 2
		=> 3 => 2
		=> 2 => 3
		=> 1 => 4
		=> 0 => 5
	=> 0 => ターツの数
		=> 5 => 3
		=> 4 => 3
		=> 3 => 4



